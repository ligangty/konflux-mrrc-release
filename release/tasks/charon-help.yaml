apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: konflux-mrrc-help
spec:
  params:
    - name: dataJsonPath
      description: path to data json file
  steps:
    - name: show-konflux-mrrc-help
      image: quay.io/ligangty/charon:latest
      script: |
        set -eux
        cat $(params.dataJsonPath)
        productName=$(cat $(params.dataJsonPath) | jq '.product.name')
        productVersion=$(cat $(params.dataJsonPath) | jq '.product.version')
        productZipUrl=$(cat $(params.dataJsonPath) | jq '.product.zipUrl')
        echo "$productName:$productVersion:$productZipUrl"
        charon --help
      workingDir: $(workspaces.data.path)
  workspaces:
    - name: data